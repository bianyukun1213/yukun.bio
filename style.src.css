@unocss;

:root {
    @apply un-scroll-smooth;
}

@media (prefers-color-scheme: no-preference) or (prefers-color-scheme: light) {
    :root {
        color-scheme: light;
        --tide-focus-outline: 2px #E36209 dashed;
        --tide-focus-outline-offset: 4px;
        --tide-background-size-sidebar: cover;
        --tide-background-position-sidebar: bottom;
        --tide-background-repeat-sidebar: no-repeat;
        --tide-background-attachment-sidebar: local;
        --tide-color-primary: #1F5297;
        --tide-color-secondary: #028090;
        --tide-color-background-primary: #FFFFFF;
        --tide-color-background-secondary: #EAEAEA;
        --tide-color-background-sidebar: #1F5297;
        --tide-color-text-primary: #323739;
        --tide-color-text-secondary: #5C6669;
        --tide-color-text-diminished: #EAEAEA;
        --tide-color-text-sidebar: #FFFFFF;
        --tide-color-link: #1F5297;
        --tide-color-link-hover: #1F5297;
        --tide-color-link-visited: #028090;
        --tide-color-code-inline: #323739;
        --tide-color-table-border: #E3E3E3;
        --tide-color-table-background-head: #EAEAEA;
        --tide-color-table-background-even: #F9F9F9;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
        --tide-focus-outline: 2px #E36209 dashed;
        --tide-focus-outline-offset: 4px;
        --tide-background-size-sidebar: cover;
        --tide-background-position-sidebar: bottom;
        --tide-background-repeat-sidebar: no-repeat;
        --tide-background-attachment-sidebar: local;
        --tide-color-primary: #CCCCCC;
        --tide-color-secondary: #00ADB5;
        --tide-color-background-primary: #151515;
        --tide-color-background-secondary: #2C2C2C;
        --tide-color-background-sidebar: #2C2C2C;
        --tide-color-text-primary: #CCCCCC;
        --tide-color-text-secondary: #8C8C8C;
        --tide-color-text-diminished: #2C2C2C;
        --tide-color-text-sidebar: #CCCCCC;
        --tide-color-link: #70B1FF;
        --tide-color-link-hover: #70B1FF;
        --tide-color-link-visited: #81C3D7;
        --tide-color-code-inline: #CCCCCC;
        --tide-color-table-border: #333333;
        --tide-color-table-background-head: #2C2C2C;
        --tide-color-table-background-even: #1F1F1F;
    }
}

:root[data-color-scheme="light"] {
    color-scheme: light;
    --tide-focus-outline: 2px #E36209 dashed;
    --tide-focus-outline-offset: 4px;
    --tide-background-size-sidebar: cover;
    --tide-background-position-sidebar: bottom;
    --tide-background-repeat-sidebar: no-repeat;
    --tide-background-attachment-sidebar: local;
    --tide-color-primary: #1F5297;
    --tide-color-secondary: #028090;
    --tide-color-background-primary: #FFFFFF;
    --tide-color-background-secondary: #EAEAEA;
    --tide-color-background-sidebar: #1F5297;
    --tide-color-text-primary: #323739;
    --tide-color-text-secondary: #5C6669;
    --tide-color-text-diminished: #EAEAEA;
    --tide-color-text-sidebar: #FFFFFF;
    --tide-color-link: #1F5297;
    --tide-color-link-hover: #1F5297;
    --tide-color-link-visited: #028090;
    --tide-color-code-inline: #323739;
    --tide-color-table-border: #E3E3E3;
    --tide-color-table-background-head: #EAEAEA;
    --tide-color-table-background-even: #F9F9F9;
}

:root[data-color-scheme="dark"] {
    color-scheme: dark;
    --tide-focus-outline: 2px #E36209 dashed;
    --tide-focus-outline-offset: 4px;
    --tide-background-size-sidebar: cover;
    --tide-background-position-sidebar: bottom;
    --tide-background-repeat-sidebar: no-repeat;
    --tide-background-attachment-sidebar: local;
    --tide-color-primary: #CCCCCC;
    --tide-color-secondary: #00ADB5;
    --tide-color-background-primary: #151515;
    --tide-color-background-secondary: #2C2C2C;
    --tide-color-background-sidebar: #2C2C2C;
    --tide-color-text-primary: #CCCCCC;
    --tide-color-text-secondary: #8C8C8C;
    --tide-color-text-diminished: #2C2C2C;
    --tide-color-text-sidebar: #CCCCCC;
    --tide-color-link: #70B1FF;
    --tide-color-link-hover: #70B1FF;
    --tide-color-link-visited: #81C3D7;
    --tide-color-code-inline: #CCCCCC;
    --tide-color-table-border: #333333;
    --tide-color-table-background-head: #2C2C2C;
    --tide-color-table-background-even: #1F1F1F;
}

:is(.un-prose) {
    --un-prose-body: var(--tide-color-text-primary);
    --un-prose-invert-body: var(--tide-color-text-primary);
    --un-prose-headings: var(--tide-color-text-primary);
    --un-prose-invert-headings: var(--tide-color-text-primary);
    --un-prose-lead: var(--tide-color-text-primary);
    --un-prose-invert-lead: var(--tide-color-text-primary);
    --un-prose-links: var(--tide-color-link);
    --un-prose-invert-links: var(--tide-color-link);
    --un-prose-bold: var(--tide-color-text-primary);
    --un-prose-invert-bold: var(--tide-color-text-primary);
    --un-prose-counters: var(--tide-color-text-secondary);
    --un-prose-invert-counters: var(--tide-color-text-secondary);
    --un-prose-bullets: var(--tide-color-text-secondary);
    --un-prose-invert-bullets: var(--tide-color-text-secondary);
    --un-prose-hr: var(--tide-color-text-diminished);
    --un-prose-invert-hr: var(--tide-color-text-diminished);
    --un-prose-quotes: var(--tide-color-text-primary);
    --un-prose-invert-quotes: var(--tide-color-text-primary);
    --un-prose-quote-borders: var(--tide-color-background-secondary);
    --un-prose-invert-quote-borders: var(--tide-color-background-secondary);
    --un-prose-captions: var(--tide-color-text-primary);
    --un-prose-invert-captions: var(--tide-color-text-primary);
    --un-prose-kbd: var(--tide-color-text-primary);
    --un-prose-invert-kbd: var(--tide-color-text-primary);
    --un-prose-kbd-shadows: var(--tide-color-background-secondary);
    --un-prose-invert-kbd-shadows: var(--tide-color-background-secondary);
    --un-prose-code: var(--tide-color-text-primary);
    --un-prose-invert-code: var(--tide-color-text-primary);
    --un-prose-pre-code: var(--tide-color-text-primary);
    --un-prose-invert-pre-code: var(--tide-color-text-primary);
    --un-prose-pre-bg: var(--tide-color-background-primary);
    --un-prose-invert-pre-bg: var(--tide-color-background-primary);
    --un-prose-th-borders: var(--tide-color-table-border);
    --un-prose-invert-th-borders: var(--tide-color-table-border);
    --un-prose-td-borders: var(--tide-color-table-border);
    --un-prose-invert-td-borders: var(--tide-color-table-border);
}

body {
    font-family: 'Noto Sans', 'Noto Sans SC', 'Noto Sans CJK SC', 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Heiti SC', 'Microsoft YaHei', 'WenQuanYi Micro Hei', system-ui, sans-serif;
}

button {
    -webkit-tap-highlight-color: transparent;
}

/* Safari */
input,
select {
    border-radius: 0;
}

/* pre 和 .table-wrapper 具有滚动条，Chrome 会使这样的元素可获得焦点。 */
[tabindex]:not([tabindex="-1"]):focus,
a:focus,
button:focus,
input:focus,
select:focus,
pre:focus,
textarea:focus,
summary:focus,
.table-wrapper:focus,
.icon-wrapper:focus-within {
    outline: var(--tide-focus-outline);
    outline-offset: var(--tide-focus-outline-offset);
}

h1 {
    @apply un-my-4;
    @apply un-text-4xl;
    @apply un-font-bold;
    /* @apply un-text-prim; */
}

#name {
    font-family: 'Noto Serif', 'Noto Serif SC', 'Noto Serif CJK SC', Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif;
}

h2 {
    @apply un-my-4;
    @apply un-text-3xl;
    @apply un-font-bold;
    /* @apply un-text-prim; */
}

h3 {
    @apply un-my-4;
    @apply un-text-2xl;
    @apply un-font-bold;
    /* @apply un-text-prim; */
}

p {
    @apply un-my-4;
}

#rendered-content {
    font-family: 'Noto Serif', 'Noto Serif SC', 'Noto Serif CJK SC', Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif;
}

:root[lang="zh-CN"] #rendered-content p {
    @apply un-indent-[2em];
}

:root[lang="zh-CN"] #rendered-content blockquote p {
    @apply un-indent-unset;
}

a:not(.icon) {
    @apply un-text-lk;
    @apply un-underline;
    @apply hover:un-text-lk-hvr hover:un-underline-offset-4;
    @apply visited:un-text-lk-vst;
}

#links .icon {
    @apply un-text-2xl;
    @apply hover:un-scale-110;
    @apply un-text-txt-scnd;
}

hr {
    @apply un-my-4;
    @apply un-border-(1 txt-dmsh solid);
}

p:has(img) {
    @apply un-flex;
    @apply un-flex-wrap;
    @apply un-justify-evenly;
    @apply un-gap-4;
}

p img {
    @apply un-block;
    @apply un-w-4/5 md:un-w-2/5 xl:un-w-2/5;
}

#profile,
#rendered-content img[data-width][data-height] {
    @apply un-cursor-zoom-in;
}

blockquote {
    @apply un-py-2 un-px-4;
    @apply un-my-4 un-mx-0;
    @apply un-italic;
    @apply un-bg-bg-scnd;
    @apply un-border-s-(4 prim solid);
    @apply un-outline-1 un-outline-transparent un-outline-solid;
}

blockquote p {
    @apply un-m-0;
}

table {
    @apply un-table;
    @apply un-min-w-full;
    @apply un-m-0;
    @apply un-table-layout-auto;
    @apply un-whitespace-nowrap;
    @apply un-border-separate;
    @apply un-border-spacing-0;
    @apply un-border-(1 tb-bd solid);
}

td,
th {
    @apply un-py-2 un-px-4;
    @apply un-border-s-(1 tb-bd solid);
}

th {
    @apply un-text-center;
    @apply un-font-bold;
}

td:first-child,
th:first-child {
    @apply un-border-s-none;
}

th {
    @apply un-bg-tb-bg-hd;
    @apply un-border-b-(1 tb-bd solid);
}

tr:nth-child(2n) {
    @apply un-bg-tb-bg-evn;
}

.table-wrapper {
    @apply un-overflow-auto;
    @apply un-my-4 un-mx-0;
}

iframe {
    @apply un-block;
    @apply un-max-w-full;
    @apply un-my-4 un-mx-auto;
}

details {
    @apply un-inline-block;
}

#get-more-contact {
    @apply un-text-lk;
    @apply un-underline;
    @apply hover:un-text-lk-hvr hover:un-underline-offset-4;
}

summary {
    @apply un-cursor-pointer;
}

#turnstile-container {
    @apply un-mt-4;
}

@media (forced-colors: active) {
    #links .icon {
        background-color: CanvasText;
    }

    .tag-common.tabs ul.nav-tabs li.tab.active,
    .tabs-comment ul.nav-tabs li.tab.active {
        outline: var(--tide-focus-outline);
        outline-color: CanvasText;
        outline-offset: var(--tide-focus-outline-offset);
    }
}

/* 以下为插件修复。 */

.alertbox,
.collapse-ctrl:not(a),
.tag-common.tabs ul.nav-tabs li.tab,
.tabs-comment ul.nav-tabs li.tab {
    /* font-family: var(--tide-font-global); */
    @apply un-font-sans!;
}

/* 参考：https://github.com/YunYouJun/hexo-tag-common/blob/main/css/index.css */

.tag-common.tabs ul.nav-tabs,
.tabs-comment ul.nav-tabs {
    display: flex;
    flex-wrap: wrap;
    margin: 0;
    padding: 0;
    background-color: var(--tide-color-background-primary);
}

.tag-common.tabs ul.nav-tabs li.tab,
.tabs-comment ul.nav-tabs li.tab {
    margin: 0;
    background-color: var(--tide-color-table-background-head);
    color: var(--tide-color-text-primary);
    border: 1px var(--tide-color-table-border) solid;
    border-bottom: none;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    flex-grow: 1;
    list-style-type: none;
    cursor: pointer;
}

.tag-common.tabs ul.nav-tabs li.tab a,
.tabs-comment ul.nav-tabs li.tab a {
    display: block;
    /* color: var(--tide-color-text-secondary); */
    color: var(--tide-color-text-primary);
    padding: 0.5em 1em;
    text-align: center;
    text-decoration: none;
}

.tag-common.tabs ul.nav-tabs li.tab a::before,
.tabs-comment ul.nav-tabs li.tab a::before {
    display: none;
}

/* .tag-common.tabs ul.nav-tabs li.tab a i,
.tabs-comment ul.nav-tabs li.tab a i {
    width: 1.2857142857em;
}

.tag-common.tabs ul.nav-tabs li.tab a .icon,
.tabs-comment ul.nav-tabs li.tab a .icon {
    margin-right: 0.5em;
} */

.tag-common.tabs ul.nav-tabs li.tab.active,
.tabs-comment ul.nav-tabs li.tab.active {
    background-color: var(--tide-color-background-primary);
    /* border-top: 4px var(--tide-color-table-border) solid; */
    /* border-bottom: none; */
    cursor: default;
}

.tag-common.tabs ul.nav-tabs li.tab.active a,
.tabs-comment ul.nav-tabs li.tab.active a {
    /* color: var(--tide-color-primary); */
    /* 写在这里覆盖 prose；--fontWeight-bold 来自 UnoCSS */
    font-weight: var(--fontWeight-bold);
}

.tag-common.tabs .tab-content,
.tabs-comment .tab-content {
    border: 1px var(--tide-color-table-border) solid;
    /* border-top: none; */
}

.tag-common.tabs .tab-content .tab-pane,
.tabs-comment .tab-content .tab-pane {
    padding: 0.5em 1em;
}

.tag-common.tabs .tab-content .tab-pane:not(.active),
.tabs-comment .tab-content .tab-pane:not(.active) {
    display: none;
}

.giscus {
    width: 100%;
    height: auto;
    min-height: 0;
}

.giscus-frame {
    /* display: none; */
    width: auto;
    height: 0;
    min-height: 0;
    /* margin-block: 0 auto;
    margin-inline: 0 auto; */
}

.giscus-frame-focus {
    min-height: 10rem;
    outline: var(--tide-focus-outline);
    outline-offset: var(--tide-focus-outline-offset);
}

@media print {

    #profile-links,
    #details {
        @apply un-mx-auto;
        @apply un-my-8;
        @apply un-p-0;
    }

    #profile-links {
        position: unset;
        @apply max-w-[80ch];
    }

    #utils {
        @apply un-hidden;
    }
}